<!DOCTYPE html>
<html lang="en">
<head>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBh4Vsuvah2ZRJunK9gMiSvccMc4Nts5W8&callback=initMap">
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ride Details - Pura Vida Rides</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
        crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Navigation Bar -->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">Pura Vida Rides</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ml-auto">
            <li class="nav-item active">
                <a class="nav-link" href="index.html">Find a Ride</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="offer-ride.html">Offer a Ride</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="login.html">Login</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="register.php">Register</a>
            </li>
        </ul>
    </div>
</nav>



    <!-- Ride Details Section -->
    <div class="container">
        <div class="row">
            <div class="col text-center">
                <h1>Ride Details</h1>
                <p>Here are the details for the selected ride.</p>
            </div>
        </div>

        <!-- Ride Details -->
        <div class="row">
            <div class="col-md-8 offset-md-2">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title" id="rideTitle"></h5>
                        <p class="card-text" id="rideDescription"></p>
                        <p class="card-text" id="startingLocation"></p>
                        <p class="card-text" id="destination"></p>
                        <p class="card-text" id="date"></p>
                        <p class="card-text" id="vehicleType"></p>
                        <p class="card-text" id="passengers"></p>
                        <p class="card-text" id="price"></p>
                        <p class="card-text" id="duration"></p>
                        <button id="bookBtn" class="btn btn-primary">Book Now</button>
                        <a href="results.html" class="btn btn-primary">Back to Results</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
     <!-- Map -->
     <div class="row mt-4">
        <div class="
        col-md-8 offset-md-2">
        <div id="map" style="width: 100%; height: 400px;"></div>
        </div>
        </div>
        
        </div>
        
        <!-- Optional JavaScript -->
<!-- (Add your optional JavaScript code here) -->
<script>
    let ride;
    document.addEventListener("DOMContentLoaded", function () {
    const selectedRide = localStorage.getItem("selectedRide");
       const rideDetails = {
        1: {
title: "Ride from San Jose to Tamarindo",
description: "Join us on our road trip to Tamarindo! We'll be leaving San Jose in the morning and heading to the beautiful beaches on the Pacific coast.",
startingLocation: "San Jose",
destination: "Tamarindo",
date: "2023-05-12",
vehicleType: "Car",
passengers: "3",
price: 45,
startLatLng: { lat: 9.9281, lng: -84.0907 }, // San Jose
endLatLng: { lat: 10.2993, lng: -85.8400 }, // Tamarindo
},
2: {
title: "Ride from San Jose to Monteverde",
description: "Join us on our journey to Monteverde! We'll be departing San Jose early in the morning and heading to the incredible cloud forests.",
startingLocation: "San Jose",
destination: "Monteverde",
date: "2023-05-20",
vehicleType: "Van",
passengers: "4",
price: 35,
startLatLng: { lat: 9.9281, lng: -84.0907 }, // San Jose
endLatLng: { lat: 10.2744, lng: -84.8256 }, // Monteverde
},
3: {
title: "Ride from San Jose to Arenal",
description: "Join us on our trip to Arenal! We'll be leaving San Jose in the morning and heading to the stunning Arenal Volcano.",
startingLocation: "San Jose",
destination: "Arenal",
date: "2023-05-25",
vehicleType: "Car",
passengers: "2",
price: 40,
startLatLng: { lat: 9.9281, lng: -84.0907 }, // San Jose
endLatLng: { lat: 10.4629, lng: -84.6427 }, // Arenal
},

};

ride = rideDetails[selectedRide];
    document.getElementById("rideTitle").innerText = ride.title;
    document.getElementById("rideDescription").innerText = ride.description;
    document.getElementById("startingLocation").innerText = `Starting location: ${ride.startingLocation}`;
    document.getElementById("destination").innerText = `Destination: ${ride.destination}`;
    document.getElementById("date").innerText = `Date: ${ride.date}`;
    document.getElementById("vehicleType").innerText = `Vehicle Type: ${ride.vehicleType}`;
    document.getElementById("passengers").innerText = `Passengers: ${ride.passengers}`;
    document.getElementById("price").innerText = `Price: $${ride.price}`;
    initMap();

    });



function initMap() {
    const directionsService = new google.maps.DirectionsService();
    const directionsRenderer = new google.maps.DirectionsRenderer();
    const map = new google.maps.Map(document.getElementById("map"), {
        zoom: 7,
        center: { lat: 9.7489, lng: -83.7534 }, // Default center (Costa Rica)
    });
    directionsRenderer.setMap(map);

    const request = {        origin: new google.maps.LatLng(ride.startLatLng.lat, ride.startLatLng.lng),
        destination: new google.maps.LatLng(ride.endLatLng.lat, ride.endLatLng.lng),
        travelMode: google.maps.TravelMode.DRIVING,
    };

    directionsService.route(request, function(result, status) {
    if (status === google.maps.DirectionsStatus.OK) {
        directionsRenderer.setDirections(result);
        const duration = result.routes[0].legs[0].duration.text;
        document.getElementById("duration").innerText = `Duration: ${duration}`;
    } else {
        console.error("Error getting directions: " + status);
    }
});
}

</script>

<!-- Footer -->
<footer class="footer mt-5">
    <div class="container">
        <div class="row">
            <div class="col text-center">
                <p>&copy; 2023 Pura Vida Rides. All Rights Reserved.</p>
                <ul class="list-inline">
                    <li class="list-inline-item">
                        <a href="#" class="text-muted">Privacy Policy</a>
                    </li>
                    <li class="list-inline-item">
                        <a href="#" class="text-muted">Terms of Service</a>
                    </li>
                    <li class="list-inline-item">
                        <a href="#" class="text-muted">Contact Us</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"
    integrity="sha384-eMNCOe7tC1doHpGoJtKh7z7lGz7fuP4F8nfdFvAOA6Gg/z6Y5J6XqqyGXYM2ntX5"
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
    <script>
        document.getElementById("bookBtn").addEventListener("click", function() {
            // Get the number of available seats in the ride
            var numPassengers = 3; // Replace with actual number of passengers in the ride
            var numSeatsAvailable = numPassengers - 1; // Subtract 1 for the driver
            
            // Limit the number of seats that the user can book
            var select = document.createElement("select");
            for (var i = 1; i <= numSeatsAvailable; i++) {
                var option = document.createElement("option");
                option.value = i;
                option.text = i;
                select.appendChild(option);
            }
            
            // Prompt the user to select the number of seats to book
            var numSeatsToBook = prompt("How many seats do you want to book?", 1);
            while (numSeatsToBook > numSeatsAvailable || numSeatsToBook <= 0) {
                numSeatsToBook = prompt("Invalid number of seats. Please select a number between 1 and " + numSeatsAvailable, 1);
            }
            
            // Store the selected number of seats in localStorage
            localStorage.setItem("numSeatsToBook", numSeatsToBook);
            
            // Redirect the user to the booking page
            window.location.href = "booking.html";
        });
    </script>
    
</body>
</html>